{% extends "base_bootstrap.html" %}

{% block canonical_url %}{% endblock %}

{% block navbar %} 
    {% include "nav.html" %}
{% endblock %}

{% block welcome %} 
    <h1>Welcome to the display page for H1 Jam Band</h1>
{% endblock %}

{% block content %}


<div class="container-fluid">   

    <div class="row">
        <h3>Practices</h3>
        <a href="{% url 'display:practice_create' %}">Schedule a practice</a>
        {% if practice_list %}
        <ul>
            {% for practice in practice_list %}
            <li>
                <b>{{ practice }}</b>
                (<a href="{% url 'display:practice_update' practice.id %}">Update</a> |
                <a href="{% url 'display:practice_delete' practice.id %}">Delete</a>)
            </li>
            {% endfor %}
        </ul>
        {% else %}
            <p>There are no practices scheduled.</p>
        {% endif %}
    </div>

    <div class="row">
        <h3>Events</h3>
        <a href="{% url 'display:event_create' %}">Add an event</a>
        {% if event_list %}
            <ul class="row">
                {% for event in event_list %}
                    <li class="col-md-6">
                        <b>{{ event }}</b> at {{ event.date }} {{ event.time }}
                        (<a href="{% url 'display:event_update' event.id %}">Update</a> |
                        <a href="{% url 'display:event_delete' event.id %}">Delete</a>) <br/>
                        Bands: [<a href="{% url 'display:band_create' event.id %}">Form Band</a>]
                        <ul>
                        {% for band in band_list %}
                            {% if band.event.id == event.id %}
                                <li>
                                    <a>{{ band.name }}</a> 
                                    [<a href="{% url 'display:band_update' band.id %}">Change Name</a> |
                                    <a href="{% url 'display:band_delete' band.id %}">Delete</a>]
                                    <br/>Members: [<a href="{% url 'display:bandmember_create' band.id %}">Add Members</a>]
                                    <ul>
                                        {% for bandmember in bandmember_list %}
                                            {% if bandmember.band.id == band.id %}
                                                <li>
                                                    {{ bandmember.member_section }}
                                                    [<a href="{% url 'display:bandmember_update' bandmember.id %}">Update</a> |
                                                    <a href="{% url 'display:bandmember_delete' bandmember.id %}">Delete</a>]
                                                </li>
                                            {% endif %}
                                        {% endfor %}
                                    </ul><br/>
                                </li>
                            {% endif %}
                        {% endfor %}
                        </ul><br/>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>There are no event in the library.</p>
        {% endif %}
    </div>


</div>
{% endblock %}

{% block footer %} {% endblock %}